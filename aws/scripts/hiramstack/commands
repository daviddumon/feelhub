sudo su - root
echo "deb http://archive.canonical.com/ubuntu/ lucid partner" | tee -a /etc/apt/sources.list
apt-get update
apt-get upgrade -y
apt-get install -y sun-java6-jre
apt-get install -y tomcat6 tomcat6-admin apache2
cd /
mkdir hiram
chown tomcat6 hiram
chmod 755 hiram
mkdir /var/www/hiram
touch /etc/apache2/sites-available/hiram
a2enmod proxy_http
echo "<VirtualHost *:80>" | tee -a /etc/apache2/sites-available/hiram
echo "DocumentRoot /var/www/hiram" | tee -a /etc/apache2/sites-available/hiram
echo "ProxyRequests On" | tee -a /etc/apache2/sites-available/hiram
echo "ProxyPreserveHost On" | tee -a /etc/apache2/sites-available/hiram
echo "<Location />" | tee -a /etc/apache2/sites-available/hiram
echo "ProxyPass http://127.0.0.1:8080/" | tee -a /etc/apache2/sites-available/hiram
echo "ProxyPassReverse http://127.0.0.1:8080/" | tee -a /etc/apache2/sites-available/hiram
echo "</Location>" | tee -a /etc/apache2/sites-available/hiram
echo "<Proxy http://127.0.0.1:8080/>" | tee -a /etc/apache2/sites-available/hiram
echo "AllowOverride None" | tee -a /etc/apache2/sites-available/hiram
echo "Order allow,deny" | tee -a /etc/apache2/sites-available/hiram
echo "Allow from All" | tee -a /etc/apache2/sites-available/hiram
echo "</Proxy>" | tee -a /etc/apache2/sites-available/hiram
echo "</VirtualHost>" | tee -a /etc/apache2/sites-available/hiram
a2dissite default
a2ensite hiram
/etc/init.d/apache2 restart
rm /var/lib/tomcat6/conf/tomcat-users.xml
touch /var/lib/tomcat6/conf/tomcat-users.xml
echo "<?xml version='1.0' encoding='utf-8'?>" | tee -a /var/lib/tomcat6/conf/tomcat-users.xml
echo "<tomcat-users>" | tee -a /var/lib/tomcat6/conf/tomcat-users.xml
echo "<role rolename='manager'/>" | tee -a /var/lib/tomcat6/conf/tomcat-users.xml
echo "<user username='manager' password='' roles='manager'/>" | tee -a /var/lib/tomcat6/conf/tomcat-users.xml
echo "</tomcat-users>" | tee -a /var/lib/tomcat6/conf/tomcat-users.xml
/etc/init.d/tomcat6 restart
